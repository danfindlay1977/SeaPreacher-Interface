(this["webpackJsonpsea-preach"]=this["webpackJsonpsea-preach"]||[]).push([[0],{100:function(e,t,n){},109:function(e,t,n){},110:function(e,t,n){},139:function(e,t){},144:function(e,t,n){},145:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(68),o=n.n(c),l=n(10),s=n(11),i=n(17),u=n(15),m=n(18),h=n(12),f=n(23),p=n(69),g=(n(80),function(e){return r.a.createElement("form",{onSubmit:e.submit},r.a.createElement("p",null,e.error),r.a.createElement("label",null,"Enter Pass code"),r.a.createElement("input",{type:"text",onChange:e.change,value:e.passcode,name:"currentPasscode"}),r.a.createElement("input",{type:"submit",value:"Login"}),r.a.createElement("img",{src:e.qrUrl,alt:"qr image"}))}),E=(n(81),function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("header",null,r.a.createElement("h1",null,e.title),r.a.createElement("p",null,"This is a web interface which allows a single user to control the Sea preacher ROV submarine"),r.a.createElement("p",null,"Scan the QR code to get a single-use code using google auth")))}),d=n(16),b=n.n(d),O=(n(98),new(function(){function e(){Object(l.a)(this,e),this.auth=!1}return Object(s.a)(e,[{key:"logIn",value:function(e){this.auth=!0,e()}},{key:"logOut",value:function(e){this.auth=!1,e()}},{key:"getAuth",value:function(){return this.auth}}]),e}())),v=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(i.a)(this,Object(u.a)(t).call(this))).handleChange=function(t){var n=t.target.value;e.setState(Object(p.a)({},t.target.name,n))},e.handlePasscodeForm=function(t){t.preventDefault();var n={userPin:e.state.currentPasscode};b.a.post("http://localhost:8000/auth",{user:n}).then((function(t){t.data.auth?O.logIn((function(){e.props.history.replace("/cockpit")})):e.setState({errorMessage:"This is the incorrect pin"})}))},e.state={title:"SeaPreacher",currentPasscode:"",url:"",errorMessage:""},e}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;b.a.get("http://localhost:8000/auth").then((function(t){console.log(t.data.url),e.setState({url:t.data.url})}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"page"},r.a.createElement(E,{title:this.state.title}),r.a.createElement("section",{className:"main"},r.a.createElement(g,{qrUrl:this.state.url,passcode:this.passcode,change:this.handleChange,submit:this.handlePasscodeForm,error:this.state.errorMessage})))}}]),t}(r.a.Component),k=(n(99),function(e){return r.a.createElement("section",{className:"button-bar"},r.a.createElement("section",{className:"cockpit-btn"},"Cockpit"),r.a.createElement("section",null,"Claw Grabber"))}),w=function(e){return r.a.createElement("section",{className:"toolbar"},r.a.createElement("section",{className:"logo"},r.a.createElement("h2",null,e.title)),r.a.createElement("section",{className:"system-controls"},r.a.createElement("button",null,"Lights on/off"),r.a.createElement(k,null)),r.a.createElement("section",{className:"basic-controls"},r.a.createElement("button",null,"Poweroff"),r.a.createElement("button",{onClick:e.logOut},"Sign Out")))},j=function(e){return r.a.createElement("section",{className:"sidebar"},r.a.createElement("p",null,"Live data from system"))},y=(n(100),n(70)),N=n.n(y),C=(n(108),function(e){return r.a.createElement("div",{className:"player-wrapper"},r.a.createElement(N.a,{url:"https://www.youtube.com/watch?v=ysz5S6PUM-U",playing:!0,width:"100%",height:"100%"}))}),S=(n(109),function(e){return r.a.createElement("section",{className:"infobar"})}),P=function(e){return r.a.createElement("section",{className:"control-btn"},r.a.createElement("button",{onClick:e.start,className:"start"},"Start"),r.a.createElement("button",{onClick:e.stop,className:"stop"},"Stop"))},M=(n(110),n(19)),x=function(e){return r.a.createElement("section",{className:"controls"},r.a.createElement(M.d,{onClick:e.forward,className:"up control",size:"2em"}),r.a.createElement(M.a,{onClick:e.reverse,className:" down control",size:"2em"}),r.a.createElement(M.b,{onClick:e.left,className:"left control",size:"2em"}),r.a.createElement(M.c,{onClick:e.right,className:"right control",size:"2em"}))},z=n(71),U=n.n(z)()("http://localhost:8000"),L=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(i.a)(this,Object(u.a)(t).call(this))).forward=function(e){U.emit("forward")},e.reverse=function(e){U.emit("reverse")},e.left=function(e){U.emit("left")},e.right=function(e){U.emit("right")},e.start=function(t){e.setState({controlsOn:!0})},e.stop=function(t){e.setState({controlsOn:!1}),U.emit("stop")},e.state={controlsOn:!1},e}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){console.log("in here !!!"),document.addEventListener("keydown",(function(e){switch(e.keyCode){case 37:U.emit("left");break;case 38:U.emit("forward");break;case 39:U.emit("right");break;case 40:U.emit("reverse")}}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"cockpit"},r.a.createElement(w,{title:this.props.title,logOut:this.props.logOut}),r.a.createElement(C,null),r.a.createElement(x,{left:this.left,right:this.right,forward:this.forward,reverse:this.reverse}),r.a.createElement(j,null),r.a.createElement(P,{start:this.start,stop:this.stop}),r.a.createElement(S,null))}}]),t}(r.a.Component),q=n(72),A=function(e){var t=e.component,n=e.title,a=e.logOut,c=Object(q.a)(e,["component","title","logOut"]);return r.a.createElement(h.b,Object.assign({},c,{render:function(e){return O.getAuth()?r.a.createElement(t,Object.assign({title:n,logOut:a},e)):r.a.createElement(h.a,{to:{path:"/",state:{from:e.location}}})}}))},D=(n(144),function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(i.a)(this,Object(u.a)(t).call(this))).logOutHandler=function(){alert("msg"),O.logOut((function(){b.a.put("http://localhost:8000/auth/signOut",{auth:!1}).then((function(){e.setState({locked:!1})}))}))},e.state={title:"SeaPreacher",locked:!1},e}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e,t=this;return e=O.getAuth()?r.a.createElement(h.b,{path:"/",exact:!0,render:function(){return r.a.createElement("h1",null,"User logged in")}}):r.a.createElement(h.b,{path:"/",exact:!0,render:function(e){return r.a.createElement(v,Object.assign({},e,{title:t.state.title}))}}),r.a.createElement(f.a,null,e,r.a.createElement(A,{title:this.state.title,logOut:this.logOutHandler,path:"/cockpit",exact:!0,component:L}))}}]),t}(r.a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(D,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},75:function(e,t,n){e.exports=n(145)},80:function(e,t,n){},81:function(e,t,n){},98:function(e,t,n){},99:function(e,t,n){}},[[75,1,2]]]);
//# sourceMappingURL=main.f5c78511.chunk.js.map